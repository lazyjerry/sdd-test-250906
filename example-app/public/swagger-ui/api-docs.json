{
    "openapi": "3.0.0",
    "info": {
        "title": "Laravel 12 API Documentation",
        "description": "完整的用戶管理 API 系統，包含認證、個人資料管理和管理員功能",
        "version": "1.0.0",
        "contact": {
            "name": "API Support",
            "email": "support@example.com"
        },
        "license": {
            "name": "MIT",
            "url": "https://opensource.org/licenses/MIT"
        }
    },
    "servers": [
        {
            "url": "http://localhost",
            "description": "本地開發環境"
        },
        {
            "url": "https://api.example.com",
            "description": "生產環境"
        }
    ],
    "tags": [
        {
            "name": "Authentication",
            "description": "用戶認證相關 API"
        },
        {
            "name": "User Profile",
            "description": "用戶個人資料管理 API"
        },
        {
            "name": "Admin - User Management",
            "description": "管理員用戶管理 API"
        },
        {
            "name": "Admin - Bulk Operations",
            "description": "管理員批量操作 API"
        },
        {
            "name": "Admin - Statistics",
            "description": "管理員統計資訊 API"
        },
        {
            "name": "Admin - System",
            "description": "管理員系統管理 API"
        }
    ],
    "components": {
        "securitySchemes": {
            "bearerAuth": {
                "type": "http",
                "scheme": "bearer",
                "bearerFormat": "JWT",
                "description": "請在此處輸入您的 Bearer Token"
            }
        },
        "schemas": {
            "User": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "username": {
                        "type": "string",
                        "example": "john_doe"
                    },
                    "name": {
                        "type": "string",
                        "example": "John Doe"
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "example": "john@example.com"
                    },
                    "phone": {
                        "type": "string",
                        "nullable": true,
                        "example": "+886912345678"
                    },
                    "role": {
                        "type": "string",
                        "enum": ["user", "admin"],
                        "example": "user"
                    },
                    "email_verified_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true,
                        "example": "2025-09-06T10:30:00.000000Z"
                    },
                    "last_login_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true,
                        "example": "2025-09-06T10:30:00.000000Z"
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-09-06T10:30:00.000000Z"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-09-06T10:30:00.000000Z"
                    }
                }
            },
            "SuccessResponse": {
                "type": "object",
                "properties": {
                    "status": {
                        "type": "string",
                        "example": "success"
                    },
                    "message": {
                        "type": "string",
                        "example": "操作成功"
                    },
                    "data": {
                        "type": "object"
                    }
                },
                "required": ["status", "message"]
            },
            "ErrorResponse": {
                "type": "object",
                "properties": {
                    "status": {
                        "type": "string",
                        "example": "error"
                    },
                    "message": {
                        "type": "string",
                        "example": "錯誤訊息"
                    },
                    "error": {
                        "type": "object",
                        "properties": {
                            "code": {
                                "type": "string",
                                "example": "ERROR_CODE"
                            },
                            "details": {
                                "type": "string",
                                "example": "詳細錯誤訊息"
                            }
                        }
                    }
                },
                "required": ["status", "message"]
            },
            "ValidationErrorResponse": {
                "type": "object",
                "properties": {
                    "status": {
                        "type": "string",
                        "example": "error"
                    },
                    "message": {
                        "type": "string",
                        "example": "資料驗證失敗"
                    },
                    "errors": {
                        "type": "object",
                        "additionalProperties": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        },
                        "example": {
                            "email": ["The email field is required."],
                            "password": ["The password field is required."]
                        }
                    }
                }
            }
        },
        "responses": {
            "Unauthorized": {
                "description": "未認證或 Token 無效",
                "content": {
                    "application/json": {
                        "schema": {
                            "$ref": "#/components/schemas/ErrorResponse"
                        },
                        "example": {
                            "status": "error",
                            "message": "Unauthenticated.",
                            "error": {
                                "code": "UNAUTHENTICATED",
                                "details": "請提供有效的認證 Token"
                            }
                        }
                    }
                }
            },
            "Forbidden": {
                "description": "權限不足",
                "content": {
                    "application/json": {
                        "schema": {
                            "$ref": "#/components/schemas/ErrorResponse"
                        },
                        "example": {
                            "status": "error",
                            "message": "權限不足，需要管理員權限",
                            "error": {
                                "code": "FORBIDDEN",
                                "details": "此功能需要管理員權限才能訪問"
                            }
                        }
                    }
                }
            },
            "ValidationError": {
                "description": "資料驗證失敗",
                "content": {
                    "application/json": {
                        "schema": {
                            "$ref": "#/components/schemas/ValidationErrorResponse"
                        }
                    }
                }
            }
        }
    },
    "paths": {
        "/api/v1/auth/register": {
            "post": {
                "tags": ["Authentication"],
                "summary": "用戶註冊",
                "description": "註冊新用戶帳號",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "username",
                                    "email",
                                    "password",
                                    "password_confirmation"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "description": "用戶姓名（可選，預設使用 username）",
                                        "example": "John Doe"
                                    },
                                    "username": {
                                        "type": "string",
                                        "description": "用戶名稱（必填，用於登入）",
                                        "example": "john_doe"
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "description": "電子郵件地址",
                                        "example": "john@example.com"
                                    },
                                    "phone": {
                                        "type": "string",
                                        "description": "電話號碼（可選）",
                                        "example": "+886912345678"
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password",
                                        "description": "密碼",
                                        "example": "Password123!"
                                    },
                                    "password_confirmation": {
                                        "type": "string",
                                        "format": "password",
                                        "description": "確認密碼",
                                        "example": "Password123!"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "註冊成功",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "user": {
                                                            "$ref": "#/components/schemas/User"
                                                        },
                                                        "token": {
                                                            "type": "string",
                                                            "description": "認證 Token",
                                                            "example": "1|abcdef123456..."
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": { "$ref": "#/components/responses/ValidationError" }
                }
            }
        },
        "/api/v1/auth/login": {
            "post": {
                "tags": ["Authentication"],
                "summary": "用戶登入",
                "description": "使用用戶名和密碼登入",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": ["username", "password"],
                                "properties": {
                                    "username": {
                                        "type": "string",
                                        "description": "用戶名稱",
                                        "example": "john_doe"
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password",
                                        "description": "密碼",
                                        "example": "Password123!"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "登入成功",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "user": {
                                                            "$ref": "#/components/schemas/User"
                                                        },
                                                        "token": {
                                                            "type": "string",
                                                            "description": "認證 Token",
                                                            "example": "1|abcdef123456..."
                                                        },
                                                        "expires_at": {
                                                            "type": "string",
                                                            "format": "date-time",
                                                            "description": "Token 過期時間",
                                                            "example": "2025-10-06T10:30:00.000000Z"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "認證失敗",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                },
                                "example": {
                                    "status": "error",
                                    "message": "使用者名稱或密碼錯誤",
                                    "error_code": "INVALID_CREDENTIALS"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "郵箱未驗證",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                },
                                "example": {
                                    "status": "error",
                                    "message": "請先驗證您的電子郵件地址",
                                    "error_code": "EMAIL_NOT_VERIFIED"
                                }
                            }
                        }
                    },
                    "422": { "$ref": "#/components/responses/ValidationError" }
                }
            }
        },
        "/api/v1/auth/logout": {
            "post": {
                "tags": ["Authentication"],
                "summary": "用戶登出",
                "description": "登出當前用戶並使 Token 失效",
                "security": [{ "bearerAuth": [] }],
                "responses": {
                    "200": {
                        "description": "登出成功",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                },
                                "example": {
                                    "status": "success",
                                    "message": "登出成功"
                                }
                            }
                        }
                    },
                    "401": { "$ref": "#/components/responses/Unauthorized" }
                }
            }
        },
        "/api/v1/auth/forgot-password": {
            "post": {
                "tags": ["Authentication"],
                "summary": "忘記密碼",
                "description": "發送密碼重設連結到用戶信箱",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": ["email"],
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "description": "註冊的電子郵件地址",
                                        "example": "john@example.com"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "重設連結發送成功",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "email": {
                                                            "type": "string",
                                                            "format": "email",
                                                            "example": "john@example.com"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": { "$ref": "#/components/responses/ValidationError" }
                }
            }
        },
        "/api/v1/auth/reset-password": {
            "post": {
                "tags": ["Authentication"],
                "summary": "重設密碼",
                "description": "使用重設 Token 重設用戶密碼",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "token",
                                    "email",
                                    "password",
                                    "password_confirmation"
                                ],
                                "properties": {
                                    "token": {
                                        "type": "string",
                                        "description": "重設 Token（從郵件連結獲得）",
                                        "example": "abcdef123456..."
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "description": "電子郵件地址",
                                        "example": "john@example.com"
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password",
                                        "description": "新密碼",
                                        "example": "NewPassword123!"
                                    },
                                    "password_confirmation": {
                                        "type": "string",
                                        "format": "password",
                                        "description": "確認新密碼",
                                        "example": "NewPassword123!"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "密碼重設成功",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "email": {
                                                            "type": "string",
                                                            "format": "email",
                                                            "example": "john@example.com"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Token 無效或過期",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                },
                                "example": {
                                    "status": "error",
                                    "message": "無效或過期的重設連結",
                                    "error_code": "INVALID_RESET_TOKEN"
                                }
                            }
                        }
                    },
                    "422": { "$ref": "#/components/responses/ValidationError" }
                }
            }
        },
        "/api/v1/auth/verify-email": {
            "post": {
                "tags": ["Authentication"],
                "summary": "驗證郵箱",
                "description": "驗證用戶的電子郵件地址",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "id",
                                    "hash",
                                    "expires",
                                    "signature"
                                ],
                                "properties": {
                                    "id": {
                                        "type": "integer",
                                        "description": "用戶 ID",
                                        "example": 1
                                    },
                                    "hash": {
                                        "type": "string",
                                        "description": "郵箱 Hash",
                                        "example": "abcdef123456..."
                                    },
                                    "expires": {
                                        "type": "integer",
                                        "description": "過期時間戳",
                                        "example": 1725612000
                                    },
                                    "signature": {
                                        "type": "string",
                                        "description": "簽名",
                                        "example": "xyz789..."
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "驗證成功",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "user": {
                                                            "type": "object",
                                                            "properties": {
                                                                "id": {
                                                                    "type": "integer",
                                                                    "example": 1
                                                                },
                                                                "username": {
                                                                    "type": "string",
                                                                    "example": "john_doe"
                                                                },
                                                                "email": {
                                                                    "type": "string",
                                                                    "example": "john@example.com"
                                                                },
                                                                "email_verified_at": {
                                                                    "type": "string",
                                                                    "format": "date-time"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "驗證連結無效或過期",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "找不到用戶",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "422": { "$ref": "#/components/responses/ValidationError" }
                }
            }
        },
        "/api/v1/users/profile": {
            "get": {
                "tags": ["User Profile"],
                "summary": "獲取個人資料",
                "description": "獲取當前用戶的個人資料",
                "security": [{ "bearerAuth": [] }],
                "responses": {
                    "200": {
                        "description": "獲取成功",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "user": {
                                                            "$ref": "#/components/schemas/User"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": { "$ref": "#/components/responses/Unauthorized" }
                }
            },
            "put": {
                "tags": ["User Profile"],
                "summary": "更新個人資料",
                "description": "更新當前用戶的個人資料",
                "security": [{ "bearerAuth": [] }],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "description": "用戶姓名",
                                        "example": "John Doe Updated"
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "description": "電子郵件地址",
                                        "example": "john.updated@example.com"
                                    },
                                    "phone": {
                                        "type": "string",
                                        "description": "電話號碼",
                                        "example": "+886987654321"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "更新成功",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "user": {
                                                            "$ref": "#/components/schemas/User"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": { "$ref": "#/components/responses/Unauthorized" },
                    "422": { "$ref": "#/components/responses/ValidationError" }
                }
            }
        },
        "/api/v1/users/change-password": {
            "put": {
                "tags": ["User Profile"],
                "summary": "修改密碼",
                "description": "修改當前用戶的密碼",
                "security": [{ "bearerAuth": [] }],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "current_password",
                                    "password",
                                    "password_confirmation"
                                ],
                                "properties": {
                                    "current_password": {
                                        "type": "string",
                                        "format": "password",
                                        "description": "當前密碼",
                                        "example": "CurrentPassword123!"
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password",
                                        "description": "新密碼",
                                        "example": "NewPassword123!"
                                    },
                                    "password_confirmation": {
                                        "type": "string",
                                        "format": "password",
                                        "description": "確認新密碼",
                                        "example": "NewPassword123!"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "密碼修改成功",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                },
                                "example": {
                                    "status": "success",
                                    "message": "密碼修改成功"
                                }
                            }
                        }
                    },
                    "401": { "$ref": "#/components/responses/Unauthorized" },
                    "422": { "$ref": "#/components/responses/ValidationError" }
                }
            }
        },
        "/api/v1/admin/users": {
            "get": {
                "tags": ["Admin - User Management"],
                "summary": "獲取用戶列表",
                "description": "獲取所有用戶列表（需要管理員權限）",
                "security": [{ "bearerAuth": [] }],
                "parameters": [
                    {
                        "name": "search",
                        "in": "query",
                        "description": "搜索關鍵字（姓名、郵箱、用戶名）",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "john"
                        }
                    },
                    {
                        "name": "role",
                        "in": "query",
                        "description": "角色過濾",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": ["user", "admin"],
                            "example": "user"
                        }
                    },
                    {
                        "name": "verified",
                        "in": "query",
                        "description": "驗證狀態過濾",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": true
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "每頁數量（最大 100）",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 100,
                            "default": 15,
                            "example": 20
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "頁碼",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "default": 1,
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "獲取成功",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "users": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/User"
                                                            }
                                                        },
                                                        "pagination": {
                                                            "type": "object",
                                                            "properties": {
                                                                "current_page": {
                                                                    "type": "integer",
                                                                    "example": 1
                                                                },
                                                                "last_page": {
                                                                    "type": "integer",
                                                                    "example": 5
                                                                },
                                                                "per_page": {
                                                                    "type": "integer",
                                                                    "example": 15
                                                                },
                                                                "total": {
                                                                    "type": "integer",
                                                                    "example": 75
                                                                },
                                                                "from": {
                                                                    "type": "integer",
                                                                    "example": 1
                                                                },
                                                                "to": {
                                                                    "type": "integer",
                                                                    "example": 15
                                                                }
                                                            }
                                                        },
                                                        "search_query": {
                                                            "type": "string",
                                                            "description": "當有搜索時才出現",
                                                            "example": "john"
                                                        },
                                                        "filters": {
                                                            "type": "object",
                                                            "description": "當有過濾條件時才出現",
                                                            "example": {
                                                                "role": "user",
                                                                "verified": true
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": { "$ref": "#/components/responses/Unauthorized" },
                    "403": { "$ref": "#/components/responses/Forbidden" }
                }
            },
            "post": {
                "tags": ["Admin - User Management"],
                "summary": "創建新用戶",
                "description": "管理員創建新用戶（需要管理員權限）",
                "security": [{ "bearerAuth": [] }],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "username",
                                    "email",
                                    "password",
                                    "role"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "John Doe"
                                    },
                                    "username": {
                                        "type": "string",
                                        "example": "john_doe"
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "john@example.com"
                                    },
                                    "phone": {
                                        "type": "string",
                                        "example": "+886912345678"
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password",
                                        "example": "Password123!"
                                    },
                                    "role": {
                                        "type": "string",
                                        "enum": ["user", "admin"],
                                        "example": "user"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "用戶創建成功",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/User"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": { "$ref": "#/components/responses/Unauthorized" },
                    "403": { "$ref": "#/components/responses/Forbidden" },
                    "422": { "$ref": "#/components/responses/ValidationError" }
                }
            }
        },
        "/api/v1/admin/users/{id}": {
            "get": {
                "tags": ["Admin - User Management"],
                "summary": "獲取用戶詳情",
                "description": "獲取指定用戶的詳細資料（需要管理員權限）",
                "security": [{ "bearerAuth": [] }],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "description": "用戶 ID",
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "with_trashed",
                        "in": "query",
                        "description": "是否包含軟刪除的用戶",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "default": false,
                            "example": false
                        }
                    },
                    {
                        "name": "include_deleted",
                        "in": "query",
                        "description": "是否包含軟刪除的用戶（別名）",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "default": false,
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "獲取成功",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "user": {
                                                            "allOf": [
                                                                {
                                                                    "$ref": "#/components/schemas/User"
                                                                },
                                                                {
                                                                    "properties": {
                                                                        "api_tokens_count": {
                                                                            "type": "integer",
                                                                            "description": "活動 Token 數量",
                                                                            "example": 2
                                                                        },
                                                                        "deleted_at": {
                                                                            "type": "string",
                                                                            "format": "date-time",
                                                                            "nullable": true,
                                                                            "description": "軟刪除時間",
                                                                            "example": null
                                                                        }
                                                                    }
                                                                }
                                                            ]
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": { "$ref": "#/components/responses/Unauthorized" },
                    "403": { "$ref": "#/components/responses/Forbidden" },
                    "404": {
                        "description": "找不到用戶",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": ["Admin - User Management"],
                "summary": "更新用戶資料",
                "description": "更新指定用戶的資料（需要管理員權限）",
                "security": [{ "bearerAuth": [] }],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "description": "用戶 ID",
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "description": "用戶姓名",
                                        "example": "Updated Name"
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "description": "電子郵件地址",
                                        "example": "updated@example.com"
                                    },
                                    "username": {
                                        "type": "string",
                                        "description": "用戶名稱",
                                        "example": "updated_username"
                                    },
                                    "phone": {
                                        "type": "string",
                                        "description": "電話號碼",
                                        "example": "+886987654321"
                                    },
                                    "role": {
                                        "type": "string",
                                        "enum": ["user", "admin"],
                                        "description": "用戶角色",
                                        "example": "user"
                                    },
                                    "email_verified_at": {
                                        "type": "string",
                                        "format": "date-time",
                                        "nullable": true,
                                        "description": "郵箱驗證時間（設為 null 可重設驗證狀態）",
                                        "example": null
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "更新成功",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "user": {
                                                            "$ref": "#/components/schemas/User"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "不能降級自己",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                },
                                "example": {
                                    "status": "error",
                                    "message": "管理員不能降級自己的權限",
                                    "error": {
                                        "code": "SELF_DEMOTION_FORBIDDEN",
                                        "details": "為了系統安全，管理員不能修改自己的權限等級"
                                    }
                                }
                            }
                        }
                    },
                    "401": { "$ref": "#/components/responses/Unauthorized" },
                    "403": { "$ref": "#/components/responses/Forbidden" },
                    "404": {
                        "description": "找不到用戶",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "422": { "$ref": "#/components/responses/ValidationError" }
                }
            }
        },
        "/api/v1/admin/users/{id}/reset-password": {
            "post": {
                "tags": ["Admin - User Management"],
                "summary": "重設用戶密碼",
                "description": "管理員重設指定用戶的密碼（需要管理員權限）",
                "security": [{ "bearerAuth": [] }],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "description": "用戶 ID",
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "oneOf": [
                                    {
                                        "title": "設定新密碼",
                                        "type": "object",
                                        "required": [
                                            "new_password",
                                            "new_password_confirmation"
                                        ],
                                        "properties": {
                                            "new_password": {
                                                "type": "string",
                                                "format": "password",
                                                "description": "新密碼",
                                                "example": "NewPassword123!"
                                            },
                                            "new_password_confirmation": {
                                                "type": "string",
                                                "format": "password",
                                                "description": "確認新密碼",
                                                "example": "NewPassword123!"
                                            },
                                            "notify_user": {
                                                "type": "boolean",
                                                "description": "是否通知用戶",
                                                "default": false,
                                                "example": true
                                            }
                                        }
                                    },
                                    {
                                        "title": "生成隨機密碼",
                                        "type": "object",
                                        "required": ["generate_random"],
                                        "properties": {
                                            "generate_random": {
                                                "type": "boolean",
                                                "description": "生成隨機密碼",
                                                "example": true
                                            },
                                            "notify_user": {
                                                "type": "boolean",
                                                "description": "是否通知用戶",
                                                "default": false,
                                                "example": true
                                            }
                                        }
                                    }
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "密碼重設成功",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "title": "一般密碼重設",
                                            "allOf": [
                                                {
                                                    "$ref": "#/components/schemas/SuccessResponse"
                                                },
                                                {
                                                    "properties": {
                                                        "data": {
                                                            "type": "object",
                                                            "properties": {
                                                                "user_id": {
                                                                    "type": "integer",
                                                                    "example": 1
                                                                },
                                                                "password_reset_at": {
                                                                    "type": "string",
                                                                    "format": "date-time"
                                                                },
                                                                "notification_sent": {
                                                                    "type": "boolean",
                                                                    "example": true
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            ]
                                        },
                                        {
                                            "title": "隨機密碼生成",
                                            "allOf": [
                                                {
                                                    "$ref": "#/components/schemas/SuccessResponse"
                                                },
                                                {
                                                    "properties": {
                                                        "data": {
                                                            "type": "object",
                                                            "properties": {
                                                                "user_id": {
                                                                    "type": "integer",
                                                                    "example": 1
                                                                },
                                                                "username": {
                                                                    "type": "string",
                                                                    "example": "john_doe"
                                                                },
                                                                "email": {
                                                                    "type": "string",
                                                                    "example": "john@example.com"
                                                                },
                                                                "temporary_password": {
                                                                    "type": "string",
                                                                    "example": "Temp123!@#"
                                                                },
                                                                "password_reset_at": {
                                                                    "type": "string",
                                                                    "format": "date-time"
                                                                },
                                                                "notification_sent": {
                                                                    "type": "boolean",
                                                                    "example": true
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": { "$ref": "#/components/responses/Unauthorized" },
                    "403": { "$ref": "#/components/responses/Forbidden" },
                    "404": {
                        "description": "找不到用戶",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "422": { "$ref": "#/components/responses/ValidationError" }
                }
            }
        },
        "/api/v1/admin/users/{id}/deactivate": {
            "post": {
                "tags": ["Admin - User Management"],
                "summary": "停用用戶",
                "description": "管理員停用指定用戶（需要管理員權限）",
                "security": [{ "bearerAuth": [] }],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": { "type": "integer" },
                        "description": "用戶 ID"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "用戶停用成功",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                }
                            }
                        }
                    },
                    "401": { "$ref": "#/components/responses/Unauthorized" },
                    "403": { "$ref": "#/components/responses/Forbidden" },
                    "404": { "$ref": "#/components/responses/NotFound" }
                }
            }
        },
        "/api/v1/admin/users/{id}/activate": {
            "post": {
                "tags": ["Admin - User Management"],
                "summary": "啟用用戶",
                "description": "管理員啟用指定用戶（需要管理員權限）",
                "security": [{ "bearerAuth": [] }],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": { "type": "integer" },
                        "description": "用戶 ID"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "用戶啟用成功",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                }
                            }
                        }
                    },
                    "401": { "$ref": "#/components/responses/Unauthorized" },
                    "403": { "$ref": "#/components/responses/Forbidden" },
                    "404": { "$ref": "#/components/responses/NotFound" }
                }
            }
        },
        "/api/v1/admin/users/bulk-deactivate": {
            "post": {
                "tags": ["Admin - Bulk Operations"],
                "summary": "批量停用用戶",
                "description": "管理員批量停用多個用戶（需要管理員權限）",
                "security": [{ "bearerAuth": [] }],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": ["user_ids"],
                                "properties": {
                                    "user_ids": {
                                        "type": "array",
                                        "items": { "type": "integer" },
                                        "example": [1, 2, 3]
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "批量停用成功",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "successful": {
                                                            "type": "integer"
                                                        },
                                                        "failed": {
                                                            "type": "integer"
                                                        },
                                                        "errors": {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "string"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": { "$ref": "#/components/responses/Unauthorized" },
                    "403": { "$ref": "#/components/responses/Forbidden" },
                    "422": { "$ref": "#/components/responses/ValidationError" }
                }
            }
        },
        "/api/v1/admin/users/bulk-activate": {
            "post": {
                "tags": ["Admin - Bulk Operations"],
                "summary": "批量啟用用戶",
                "description": "管理員批量啟用多個用戶（需要管理員權限）",
                "security": [{ "bearerAuth": [] }],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": ["user_ids"],
                                "properties": {
                                    "user_ids": {
                                        "type": "array",
                                        "items": { "type": "integer" },
                                        "example": [1, 2, 3]
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "批量啟用成功",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "successful": {
                                                            "type": "integer"
                                                        },
                                                        "failed": {
                                                            "type": "integer"
                                                        },
                                                        "errors": {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "string"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": { "$ref": "#/components/responses/Unauthorized" },
                    "403": { "$ref": "#/components/responses/Forbidden" },
                    "422": { "$ref": "#/components/responses/ValidationError" }
                }
            }
        },
        "/api/v1/admin/users/bulk-delete": {
            "post": {
                "tags": ["Admin - Bulk Operations"],
                "summary": "批量刪除用戶",
                "description": "管理員批量刪除多個用戶（需要管理員權限）",
                "security": [{ "bearerAuth": [] }],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": ["user_ids"],
                                "properties": {
                                    "user_ids": {
                                        "type": "array",
                                        "items": { "type": "integer" },
                                        "example": [1, 2, 3]
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "批量刪除成功",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "successful": {
                                                            "type": "integer"
                                                        },
                                                        "failed": {
                                                            "type": "integer"
                                                        },
                                                        "errors": {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "string"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": { "$ref": "#/components/responses/Unauthorized" },
                    "403": { "$ref": "#/components/responses/Forbidden" },
                    "422": { "$ref": "#/components/responses/ValidationError" }
                }
            }
        },
        "/api/v1/admin/statistics/users": {
            "get": {
                "tags": ["Admin - Statistics"],
                "summary": "獲取用戶統計資訊",
                "description": "管理員獲取用戶相關統計資訊（需要管理員權限）",
                "security": [{ "bearerAuth": [] }],
                "responses": {
                    "200": {
                        "description": "統計資訊獲取成功",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "total_users": {
                                                            "type": "integer"
                                                        },
                                                        "active_users": {
                                                            "type": "integer"
                                                        },
                                                        "inactive_users": {
                                                            "type": "integer"
                                                        },
                                                        "new_users_today": {
                                                            "type": "integer"
                                                        },
                                                        "new_users_this_week": {
                                                            "type": "integer"
                                                        },
                                                        "new_users_this_month": {
                                                            "type": "integer"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": { "$ref": "#/components/responses/Unauthorized" },
                    "403": { "$ref": "#/components/responses/Forbidden" }
                }
            }
        },
        "/api/v1/admin/statistics/system": {
            "get": {
                "tags": ["Admin - Statistics"],
                "summary": "獲取系統統計資訊",
                "description": "管理員獲取系統相關統計資訊（需要管理員權限）",
                "security": [{ "bearerAuth": [] }],
                "responses": {
                    "200": {
                        "description": "系統統計資訊獲取成功",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "database_size": {
                                                            "type": "string"
                                                        },
                                                        "total_api_calls": {
                                                            "type": "integer"
                                                        },
                                                        "average_response_time": {
                                                            "type": "number"
                                                        },
                                                        "error_rate": {
                                                            "type": "number"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": { "$ref": "#/components/responses/Unauthorized" },
                    "403": { "$ref": "#/components/responses/Forbidden" }
                }
            }
        },
        "/api/v1/admin/system/health": {
            "get": {
                "tags": ["Admin - System"],
                "summary": "系統健康檢查",
                "description": "管理員獲取系統健康狀態（需要管理員權限）",
                "security": [{ "bearerAuth": [] }],
                "responses": {
                    "200": {
                        "description": "系統健康狀態",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "status": {
                                                            "type": "string",
                                                            "enum": [
                                                                "healthy",
                                                                "warning",
                                                                "critical"
                                                            ]
                                                        },
                                                        "database": {
                                                            "type": "string",
                                                            "enum": [
                                                                "connected",
                                                                "disconnected"
                                                            ]
                                                        },
                                                        "cache": {
                                                            "type": "string",
                                                            "enum": [
                                                                "working",
                                                                "error"
                                                            ]
                                                        },
                                                        "disk_space": {
                                                            "type": "string"
                                                        },
                                                        "memory_usage": {
                                                            "type": "string"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": { "$ref": "#/components/responses/Unauthorized" },
                    "403": { "$ref": "#/components/responses/Forbidden" }
                }
            }
        },
        "/api/v1/admin/audit-log": {
            "get": {
                "tags": ["Admin - System"],
                "summary": "獲取審計日誌",
                "description": "管理員獲取系統審計日誌（需要管理員權限）",
                "security": [{ "bearerAuth": [] }],
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "schema": { "type": "integer", "default": 1 },
                        "description": "頁碼"
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "schema": { "type": "integer", "default": 15 },
                        "description": "每頁數量"
                    },
                    {
                        "name": "action",
                        "in": "query",
                        "schema": { "type": "string" },
                        "description": "篩選操作類型"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "審計日誌獲取成功",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "logs": {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "object",
                                                                "properties": {
                                                                    "id": {
                                                                        "type": "integer"
                                                                    },
                                                                    "user_id": {
                                                                        "type": "integer"
                                                                    },
                                                                    "action": {
                                                                        "type": "string"
                                                                    },
                                                                    "details": {
                                                                        "type": "object"
                                                                    },
                                                                    "ip_address": {
                                                                        "type": "string"
                                                                    },
                                                                    "created_at": {
                                                                        "type": "string",
                                                                        "format": "date-time"
                                                                    }
                                                                }
                                                            }
                                                        },
                                                        "pagination": {
                                                            "$ref": "#/components/schemas/PaginationInfo"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": { "$ref": "#/components/responses/Unauthorized" },
                    "403": { "$ref": "#/components/responses/Forbidden" }
                }
            }
        }
    }
}
